code_name: 'polariton-example'
docker:
  image_name: 'mdiengine'

  build_image:
    - apt-get update
    - apt-get install -y git cmake liblapack-dev libeigen3-dev
    - pip install numpy
    - pip install pymdi
    - pip install pydantic
    - pip install Pint
    - pip install scipy
    
    # Install Psi4 as a Python package
    - |
      if [ ! -d "/psi4" ]; then
        git clone https://github.com/psi4/psi4.git /psi4
      fi
    - cd /psi4
    - |
      if [ ! -d "objdir" ]; then
        cmake -S. -Bobjdir
      fi
    - cd objdir
    - make -j 1
    - make install
    - cd /
    - rm -rf /psi4
    - mkdir /psi4_scratch
    - echo "export PYTHONPATH=\$PYTHONPATH:/usr/local/psi4/lib" >> ~/.profile
    - echo "export PYTHONPATH=\$PYTHONPATH:/usr/local/psi4/lib" >> ~/.bashrc
    - echo "export PSI_SCRATCH=\$PYTHONPATH:/psi4_scratch" >> ~/.profile
    - echo "export PSI_SCRATCH=\$PYTHONPATH:/psi4_scratch" >> ~/.bashrc

  build_engine:
    - echo "Insert commands to build your engine code here"

  validate_engine:
    - echo "Insert code that will confirm that your code has been built successfully"
    - exit 1

engine_tests:
  # Provide at least one example input that can be used to test your code's MDI functionality
  script:
    - echo "Insert commands to run an example calculation here"
    - exit 1
